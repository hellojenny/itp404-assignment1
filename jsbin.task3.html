<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2016 by anonymous (http://jsbin.com/watefinibo/1/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>

<script id="jsbin-javascript">
// Task 1

var reviewsData = {
  data: [
    {
      id: 1,
      attributes: {
        'review-title': 'Terrible!',
        'stars': 1,
        'cost': 'high'
      }
    },
    {
      id: 2,
      attributes: {
        'review-title': 'Decent place',
        'stars': 3,
        'cost': 'average'
      }
    },
    {
      id: 3,
      attributes: {
        'review-title': 'I would come again',
        'stars': 3.5,
        'cost': 'average'
      }
    },
    {
      id: 4,
      attributes: {
        'review-title': 'So good, and cheap!',
        'stars': 4,
        'cost': 'low-average'
      }
    },
    {
      id: 5,
      attributes: {
        'review-title': 'Good, but pricey!',
        'stars': 4,
        'cost': 'high'
      }
    }
  ]
};

function extractReviews(reviewsData) {
  var reviews = reviewsData.data.map(function(reviewsData) {
    return {
      id: reviewsData.id,
      title: reviewsData.attributes['review-title'],
      stars: reviewsData.attributes.stars,
      cost: reviewsData.attributes.cost,
    };
  });
  return reviews;
}

// console.log(extractReviews(reviewsData));

// Task 2

var reviews = extractReviews(reviewsData);

function findGoodReviews(reviews) {
  var goodReviews = reviews.filter(function(reviews) {
    return reviews.title.toLowerCase().indexOf('good') != -1;
  })
  return goodReviews;
}

// console.log(findGoodReviews(reviews));

// Task 3

function classifyReviewsByCost(reviews) {
  var costClassification = reviews.reduce(function(classification,review) {
    if (classification[review.cost]) {
      classification[review.cost] += 1;
    }
    else {
      classification[review.cost] = 1;
    }
    return classification;
  }, {});
  return costClassification;
}

console.log(classifyReviewsByCost(reviews));

</script>
</body>
</html>